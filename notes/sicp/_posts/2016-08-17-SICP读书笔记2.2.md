---
layout: post
title: SICP读书笔记2.2
tags: SICP
hidden: true

---

## 练习2.17

``` scheme
(define (last-pair l)
  (if (null? (cdr l))
      l
      (last-pair (cdr l))))
```


## 练习2.18

``` scheme
(define (reverse1 lst)
  (if (null? lst)
      '()
      (append (reverse1 (cdr lst)) (list (car lst)))))

```

## 练习2.19

``` scheme
(define (cc amount coin-values)
  (cond ((= amount 0) 1)
        ((or (< amount 0) (no-more? coin-values)) 0)
        (else
         (+ (cc amount (except-first-denomination coin-values))
            (cc (- amount (first-denomination coin-values)) coin-values)))))

(define (first-denomination x) (car x))
(define (except-first-denomination x) (cdr x))
(define (no-more? x) (null? x))
```

## 练习2.20

``` scheme
(define (same-parity . n)
  (define (same d)
    (or (and (even? d) (even? (car n)))
        (and (odd? d) (odd? (car n)))))
  (define (iter i)
    (cond
     ((null? i) '())
     ((same (car i))
      (cons (car i) (iter (cdr i))))
     (else (iter (cdr i)))))
  (iter n))
```

## 练习2.21

``` scheme
(define (square x) (* x x))
(define (square-list items)
  (if (null? items)
      '()
      (cons (square (car items)) (square-list (cdr items)))))

(define (square-list2 items)
  (map square items))
```

## 练习2.22

1. cons拼接的顺序错误
2. 拼接方法错误，应该使用append 追加到最后而不是使用cons拼接

可修改为：

``` scheme
(define (square-list items)
  (define (iter things answer)
    (if (null? things)
        answer
        (iter (cdr things)
              (append answer
                    (list (square (car things)))))))
  (iter items '()))
```


## 练习2.23

``` scheme
(define (for-each f lst)
  (when (not (null? lst))
    (f (car lst))
    (for-each2 f (cdr lst))))
```
